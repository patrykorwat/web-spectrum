;  RTL-SDR GPS L1 C/A GNSS-SDR Configuration Template
;  ==================================================
;
;  This configuration processes GPS L1 C/A signals recorded with RTL-SDR
;  Sample format: 8-bit IQ (uint8) - RTL-SDR native format
;  Sample rate: 2.048 MSPS
;  Center frequency: 1575.42 MHz (GPS L1)
;
;  Key Differences from SDRplay:
;  - Sample format: ibyte (8-bit uint8) vs ishort (16-bit int16)
;  - Lower dynamic range (8-bit vs 16-bit)
;  - May need longer integration times for weak signals
;
;  Usage:
;    gnss-sdr --config_file=<this_file>.conf --signal_source.filename=<recording>.dat

[GNSS-SDR]

;######### GLOBAL OPTIONS ##################
GNSS-SDR.internal_fs_sps=2048000  ; Internal sampling rate (2.048 MSPS)

;######### SIGNAL_SOURCE CONFIG ############
SignalSource.implementation=File_Signal_Source
SignalSource.filename=RECORDING_FILE_PLACEHOLDER  ; Will be replaced by API
SignalSource.item_type=ibyte  ; 8-bit signed integers (RTL-SDR format: uint8 → ibyte after conversion)
; Note: RTL-SDR outputs unsigned 8-bit (0-255), GNSS-SDR expects signed (-128 to +127)
; RTL-SDR drivers typically handle this conversion automatically

SignalSource.sampling_frequency=2048000  ; 2.048 MSPS
SignalSource.freq=1575420000  ; GPS L1 C/A center frequency (Hz)
SignalSource.samples=0  ; 0 = process entire file
SignalSource.repeat=false
SignalSource.dump=false
SignalSource.dump_filename=./signal_source.dat
SignalSource.enable_throttle_control=false

;######### SIGNAL_CONDITIONER CONFIG ############
; Signal conditioner for 8-bit samples
SignalConditioner.implementation=Signal_Conditioner

;######### DATA_TYPE_ADAPTER CONFIG ############
DataTypeAdapter.implementation=Ibyte_To_Complex
; Converts 8-bit signed integers to complex float

;######### INPUT_FILTER CONFIG ############
; Band-pass filter for GPS L1 C/A (±1.023 MHz)
InputFilter.implementation=Freq_Xlating_Fir_Filter
InputFilter.input_item_type=gr_complex
InputFilter.output_item_type=gr_complex
InputFilter.taps_item_type=float
InputFilter.number_of_taps=5
InputFilter.number_of_bands=2
InputFilter.band1_begin=0.0
InputFilter.band1_end=0.45
InputFilter.band2_begin=0.55
InputFilter.band2_end=1.0
InputFilter.ampl1_begin=1.0
InputFilter.ampl1_end=1.0
InputFilter.ampl2_begin=0.0
InputFilter.ampl2_end=0.0
InputFilter.band1_error=1.0
InputFilter.band2_error=1.0
InputFilter.filter_type=bandpass
InputFilter.grid_density=16
InputFilter.sampling_frequency=2048000
InputFilter.IF=0  ; Zero IF (direct sampling)
InputFilter.decimation_factor=1  ; No decimation (keep 2.048 MSPS)
InputFilter.dump=false
InputFilter.dump_filename=./input_filter.dat

;######### RESAMPLER CONFIG ############
Resampler.implementation=Pass_Through
; No resampling needed - 2.048 MSPS is ideal for GPS L1 C/A

;######### CHANNELS GLOBAL CONFIG ############
; GPS L1 C/A channels (PRN 1-32)
Channels_1C.count=12  ; Track up to 12 GPS satellites simultaneously
Channels.in_acquisition=1  ; Channels acquiring in parallel

;######### GPS ACQUISITION CONFIG ############
; Acquisition for GPS L1 C/A
Acquisition_1C.implementation=GPS_L1_CA_PCPS_Acquisition
Acquisition_1C.item_type=gr_complex
Acquisition_1C.coherent_integration_time_ms=1  ; 1 ms integration
Acquisition_1C.pfa=0.01  ; Probability of false alarm
Acquisition_1C.doppler_max=5000  ; ±5 kHz Doppler search range
Acquisition_1C.doppler_step=250  ; 250 Hz Doppler step
Acquisition_1C.dump=false
Acquisition_1C.dump_filename=./acq_dump.dat
Acquisition_1C.blocking=false  ; Non-blocking acquisition
Acquisition_1C.use_CFAR_algorithm=true  ; Use CFAR detection
Acquisition_1C.max_dwells=1  ; Number of non-coherent integrations

;######### GPS TRACKING CONFIG ############
; Tracking for GPS L1 C/A
Tracking_1C.implementation=GPS_L1_CA_DLL_PLL_Tracking
Tracking_1C.item_type=gr_complex
Tracking_1C.pll_bw_hz=35.0  ; PLL bandwidth (Hz)
Tracking_1C.dll_bw_hz=2.0   ; DLL bandwidth (Hz)
Tracking_1C.early_late_space_chips=0.5  ; Early-Late spacing
Tracking_1C.dump=false
Tracking_1C.dump_filename=./tracking_ch_

;######### TELEMETRY DECODER CONFIG ############
; Decode GPS navigation message
TelemetryDecoder_1C.implementation=GPS_L1_CA_Telemetry_Decoder
TelemetryDecoder_1C.dump=false

;######### OBSERVABLES CONFIG ############
; Compute pseudoranges and other observables
Observables.implementation=Hybrid_Observables
Observables.dump=false
Observables.dump_filename=./observables.dat

;######### PVT CONFIG ############
; Position, Velocity, Time solution
PVT.implementation=RTKLIB_PVT
PVT.positioning_mode=Single  ; Single-point positioning
PVT.output_rate_ms=100  ; Output rate (100 ms = 10 Hz)
PVT.display_rate_ms=500  ; Console display rate (500 ms)
PVT.iono_model=Broadcast  ; Use broadcast ionospheric model
PVT.trop_model=Saastamoinen  ; Tropospheric model
PVT.flag_rtcm_server=false  ; Disable RTCM server
PVT.flag_rtcm_tty_port=false  ; Disable RTCM serial
PVT.rtcm_dump_devname=/dev/pts/1
PVT.dump=false
PVT.dump_filename=./PVT
PVT.nmea_dump_filename=./gnss_sdr_pvt.nmea  ; NMEA output
PVT.flag_nmea_tty_port=false
PVT.nmea_dump_devname=/dev/pts/4
PVT.kml_output_enabled=true  ; Enable KML output
PVT.gpx_output_enabled=true  ; Enable GPX output
PVT.geojson_output_enabled=true  ; Enable GeoJSON output
PVT.xml_output_enabled=true  ; Enable XML output
PVT.rinex_version=3  ; RINEX version
PVT.rinex_output_enabled=false  ; Disable RINEX (large files)

;######### MONITOR CONFIG ############
Monitor.enable_monitor=false  ; Disable monitor (use logs instead)
Monitor.decimation_factor=1
Monitor.client_addresses=127.0.0.1
Monitor.udp_port=1234
